mod_lua_dbh - a different implementation from mod_lua_luasql for accessing switch_cache_sqldb from inside Lua.

This time it's done through SWIG. Syntax is different and it has the added benefit of using callback function, so the result doesn't necessarilty have to balloon in memory. Another nicety is that the function is available from the freeswitch table, to keep it more in line with existing functions (also implementation wise).

Syntax:


local dbh = freeswitch.Dbh("dsn","user","pass")

dbh:query("select 1 as foo", function(row) stream:write("Foo = " .. row.foo) end)

-- so the anonymous function is called for each row returned

-- to get previous (mod_odbc_query or mod_lua_luasql) functionality, you can do this:

local res = {}
dbh:query("select 1 as foo", function(row), table.insert(res, row) end)


--

Just use the diff from the root of your FreeSWITCH tree. Enjoy :)
