<configuration name="odbc_tools.conf" description="ODBC Tools Module">

  <settings>
    <param name="odbc-dsn" value="db:user:password"/>
    <param name="bindings" value="directory"/> <!-- set value to "" to disable bindings -->
    <param name="directory-attrs" value="id,mailbox,cidr,number-alias"/> <!-- max 10 -->
    <param name="directory-params" value="password,dial-string"/> <!-- max 30 -->
    <param name="directory-variables" value="user_context"/> <!-- max 30 -->
  </settings>

  <queries>

    <!-- sample queries for using by directory binding -->
    <query name="directory-network-list" value="select id, cidr from users where domain = '${domain}' and cidr != '';"/>
    <query name="directory-default" value="select * from users where domain = '${domain}' and ${key} = '${user}';"/>
    <!-- <query name="directory-default" value="select * from users where domain = '${domain}' and &quot;${key}&quot; = '${user}';"/> --> <!-- pgsql -->
    <!-- <query name="directory-default" value="select * from users where domain = '${domain}' and `${key}` = '${user}';"/> --> <!-- mysql -->

    <!-- sample queries for using by dialplan app odbc_query -->
    <query name="map-e164-to-user_id" value="SELECT user_id FROM e164_users WHERE e164 = ${dialed_e164_number};"/>
    <query name="get-identity-variables" value="SELECT name, value FROM identities WHERE user_id = ${user_id};"/>

    <!-- you can override the odbc-dsn per query -->
    <query name="get-from-other-db" odbc-dsn="db2:user2:password2" value="SELECT * FROM some_table WHERE true;"/>

  </queries>

</configuration>
