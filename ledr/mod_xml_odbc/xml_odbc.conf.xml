<configuration name="xml_odbc.conf" description="XML ODBC Configuration">

  <bindings>
<!--
    <binding name="configuration">
      <param name="odbc-dsn" value="freeswitch:freeswitch:secret"/>
      <param name="template" value="configuration"/>
    </binding>
-->
    <binding name="directory">
      <param name="odbc-dsn" value="freeswitch:freeswitch:secret"/>
      <param name="template" value="directory"/>
    </binding>
<!--
    <binding name="dialplan">
      <param name="odbc-dsn" value="freeswitch:freeswitch:secret"/>
      <param name="template" value="dialplan"/>
    </binding>

    <binding name="phrases">
      <param name="odbc-dsn" value="freeswitch:freeswitch:secret"/>
      <param name="template" value="phrases"/>
    </binding>
-->
  </bindings>

  <templates>

    <template name="configuration">
      <xml-odbc-do name="break-to" value="${section}" on-no-template-break-to="simple_configuration"/>
    </template>

    <template name="simple_configuration">
      <document type="freeswitch/xml">
        <configuration name="${section}">
          <settings>
            <xml-odbc-do name="query" value="
              SELECT
                name, value
              FROM
                cnf_settings
              WHERE
                hostname = '${hostname}' AND
                section = '${section}';">
              <param name="${name}" value="${value}"/>
            </xml-odbc-do>
          </settings>
        </configuration>
      </document>
    </template>
  
    <template name="not_found">
      <document type="freeswitch/xml">
        <section name="result">
          <result status="not found"/>
        </section>
      </document>
    </template>

    <X-PRE-PROCESS cmd="include" data="xml_odbc_templates/*.xml"/>

  </templates>

</configuration>
